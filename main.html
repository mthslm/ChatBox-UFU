<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>ChatBox UFU</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>

</head>

<body>

    <section class="msger">
        <header class="msger-header">
            <div class="msger-header-title">
                <i class="fas fa-comment-alt"></i> ChatBot para dÃºvidas frequentes
            </div>
            <div class="msger-header-options">
                <span><i class="fas fa-cog"></i></span>
            </div>
        </header>

        <main class="msger-chat">


            <div class="msg left-msg">
                <div class="msg-img"
                    style="background-image: url(https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/Ufu_logo.svg/2048px-Ufu_logo.svg.png)">
                </div>

                <div class="msg-bubble">
                    <div class="msg-info">
                        <div class="msg-info-name">Coordenador Virtual</div>
                        <div class="msg-info-time">Agora</div>
                    </div>

                    <div class="msg-text">
                        OlÃ¡! Vou tentar te ajudar num primeiro momento, ok? Basta escrever sua dÃºvida! ðŸ˜„
                    </div>
                </div>
            </div>

        </main>

        <form class="msger-inputarea">
            <input type="text" class="msger-input" placeholder="Escreva sua dÃºvida">
            <button type="submit" class="msger-send-btn">Enviar</button>
        </form>
    </section>

    <script>
        const qaList = [
            {
                question: "Quais sÃ£o os programas que compÃµem a PolÃ­tica de AssistÃªncia Estudantil da UFU?",
                answer: `A PolÃ­tica de AssistÃªncia Estudantil da UFU Ã© composta pelos seguintes programas: 
      I â€“ Programa de IntegraÃ§Ã£o dos Estudantes Ingressantes;
      II â€“ Programa de AlimentaÃ§Ã£o;
      III â€“ Programa de Moradia;
      IV â€“ Programa de Transporte;
      V â€“ Programa de SaÃºde FÃ­sica;
      VI â€“ Programa de SaÃºde Mental;
      VII â€“ Programa de Esportes, RecreaÃ§Ã£o e Lazer;
      VIII â€“ Programa de Incentivo Ã  FormaÃ§Ã£o Cultural;
      IX â€“ Programa de AssistÃªncia e Apoio aos Estudantes de Baixa CondiÃ§Ã£o SocioeconÃ´mica;
      X â€“ Programa de Incentivo Ã  FormaÃ§Ã£o da Cidadania;
      XI â€“ Programa de AquisiÃ§Ã£o de Materiais DidÃ¡ticos e Livros;
      XII â€“ Programa de Bolsas AcadÃªmicas.`
            },
            {
                question: "O que Ã© o Programa de IntegraÃ§Ã£o dos Estudantes Ingressantes?",
                answer: "O Programa de IntegraÃ§Ã£o dos Estudantes Ingressantes tem como objetivo criar condiÃ§Ãµes para que o estudante se integre ao contexto universitÃ¡rio, preparando-o para o bom desempenho acadÃªmico e formaÃ§Ã£o integral."
            },
            {
                question: "O que Ã© o Programa de AlimentaÃ§Ã£o?",
                answer: "O Programa de AlimentaÃ§Ã£o tem como objetivo oferecer condiÃ§Ãµes para o atendimento das necessidades de alimentaÃ§Ã£o bÃ¡sica dos discentes do Ensino Superior da UFU, por meio dos Restaurantes UniversitÃ¡rios (RUs), de modo a contribuir para sua permanÃªncia e conclusÃ£o de curso nesta InstituiÃ§Ã£o."
            },
            {
                question: "O que Ã© o Programa de Moradia?",
                answer: "O Programa de Moradia tem como objetivo oferecer condiÃ§Ãµes adequadas de moradia aos estudantes de baixa condiÃ§Ã£o socioeconÃ´mica da UFU, de forma a permitir o desenvolvimento de suas atividades acadÃªmicas e o pleno exercÃ­cio de sua cidadania."
            },
            {
                question: "O que Ã© o Programa de Transporte?",
                answer: "O Programa de Transporte tem como objetivo oferecer condiÃ§Ãµes de transporte adequadas para o acesso dos estudantes de baixa condiÃ§Ã£o socioeconÃ´mica Ã s atividades acadÃªmicas dos diversos cursos de graduaÃ§Ã£o da UFU, contribuindo para a melhoria do desempenho acadÃªmico com qualidade de vida."
            },
            {
                question: "O que Ã© o Programa de SaÃºde FÃ­sica?",
                answer: "O Programa de SaÃºde FÃ­sica tem como objetivo implantar medidas efetivas para viabilizar a manutenÃ§Ã£o e/ou recuperaÃ§Ã£o da saÃºde dos estudantes."
            },
            {
                question: "O que Ã© o Programa de SaÃºde Mental?",
                answer: "O Programa de SaÃºde Mental tem como objetivo promover aÃ§Ãµes em saÃºde mental Ã  comunidade discente da UFU, nos Ã¢mbitos preventivo, educativo e terapÃªutico."
            },
            {
                question: "O que Ã© o Programa de Esportes, RecreaÃ§Ã£o e Lazer?",
                answer: "O Programa de Esportes, RecreaÃ§Ã£o e Lazer tem como objetivo instituir aÃ§Ãµes de educaÃ§Ã£o esportiva, recreativa e de lazer, capazes de contribuir com o processo de formaÃ§Ã£o integral, melhoria da qualidade de vida e a ampliaÃ§Ã£o da integraÃ§Ã£o social, da comunidade universitÃ¡ria."
            },
            {
                question: "Qual Ã© o objetivo do Programa de IntegraÃ§Ã£o dos Estudantes Ingressantes?",
                answer: "O objetivo Ã© criar condiÃ§Ãµes para que o estudante se integre ao contexto universitÃ¡rio, preparando-o para o bom desempenho acadÃªmico e formaÃ§Ã£o integral."
            },
            {
                question: "Como funciona o Programa de AlimentaÃ§Ã£o da UFU?",
                answer: "O Programa de AlimentaÃ§Ã£o oferece condiÃ§Ãµes para o atendimento das necessidades de alimentaÃ§Ã£o bÃ¡sica dos discentes do Ensino Superior da UFU, por meio dos Restaurantes UniversitÃ¡rios (RUs), de modo a contribuir para sua permanÃªncia e conclusÃ£o de curso nesta InstituiÃ§Ã£o."
            },
            {
                question: "O que Ã© o Programa de Moradia da UFU?",
                answer: "O Programa de Moradia oferece condiÃ§Ãµes adequadas de moradia aos estudantes de baixa condiÃ§Ã£o socioeconÃ´mica da UFU, de forma a permitir o desenvolvimento de suas atividades acadÃªmicas e o pleno exercÃ­cio de sua cidadania."
            },
            {
                question: "Quem pode utilizar o Programa de Transporte da UFU?",
                answer: "O Programa de Transporte oferece condiÃ§Ãµes de transporte adequadas para o acesso dos estudantes de baixa condiÃ§Ã£o socioeconÃ´mica Ã s atividades acadÃªmicas dos diversos cursos de graduaÃ§Ã£o da UFU, contribuindo para a melhoria do desempenho acadÃªmico com qualidade de vida."
            },
            {
                question: "O que Ã© o Programa de SaÃºde FÃ­sica da UFU?",
                answer: "O Programa de SaÃºde FÃ­sica tem como objetivo implantar medidas efetivas para viabilizar a manutenÃ§Ã£o e ou recuperaÃ§Ã£o da saÃºde dos estudantes."
            },
            {
                question: "Quais sÃ£o as aÃ§Ãµes do Programa de SaÃºde Mental da UFU?",
                answer: "O Programa de SaÃºde Mental da UFU promove aÃ§Ãµes em saÃºde mental Ã  comunidade discente nos Ã¢mbitos preventivo, educativo e terapÃªutico."
            },
            {
                question: "O que Ã© o Programa de Esportes, RecreaÃ§Ã£o e Lazer da UFU?",
                answer: "O Programa de Esportes, RecreaÃ§Ã£o e Lazer institui aÃ§Ãµes de educaÃ§Ã£o esportiva, recreativa e de lazer, capazes de contribuir com o processo de formaÃ§Ã£o integral, melhoria da qualidade de vida e a ampliaÃ§Ã£o da integraÃ§Ã£o social, da comunidade universitÃ¡ria."
            },
            {
                question: "Qual Ã© o objetivo do Programa de Incentivo Ã  FormaÃ§Ã£o Cultural da UFU?",
                answer: "O objetivo do Programa de Incentivo Ã  FormaÃ§Ã£o Cultural Ã© garantir aos estudantes o pleno exercÃ­cio dos direitos culturais em consonÃ¢ncia com a PolÃ­tica de Culturas da UFU."
            }]


        const fuse = new Fuse(qaList, {
            keys: ['question']
        });

        function getAnswer(question) {
            const result = fuse.search(question);

            if (result.length > 0) {
                return result[0].item.answer;
            } else {
                return "Desculpe, nÃ£o entendi a sua pergunta.";
            }
        }

        // Teste do chatbot
        const question = "Qual Ã© a capital do brasil?";
        const answer = getAnswer(question);
        console.log(answer); // A capital do Brasil Ã© BrasÃ­lia.



        //parte do chat
        const msgerForm = get(".msger-inputarea");
        const msgerInput = get(".msger-input");
        const msgerChat = get(".msger-chat");



        // Icons made by Freepik from www.flaticon.com
        const BOT_IMG = "https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/Ufu_logo.svg/2048px-Ufu_logo.svg.png";
        const PERSON_IMG = "https://www.svgrepo.com/show/167320/boy.svg";
        const BOT_NAME = "Coordenador Virtual";
        const PERSON_NAME = "Aluno";

        msgerForm.addEventListener("submit", event => {
            event.preventDefault();

            const msgText = msgerInput.value;
            if (!msgText) return;

            appendMessage(PERSON_NAME, PERSON_IMG, "right", msgText);
            msgerInput.value = "";

            botResponse(msgText);
        });

        function appendMessage(name, img, side, text) { //nome, imagem, lado (left(esquerda), right(direita))
            //   Simple solution for small apps
            const msgHTML = `
    <div class="msg ${side}-msg">
      <div class="msg-img" style="background-image: url(${img})"></div>

      <div class="msg-bubble">
        <div class="msg-info">
          <div class="msg-info-name">${name}</div>
          <div class="msg-info-time">${formatDate(new Date())}</div>
        </div>

        <div class="msg-text">${text}</div>
      </div>
    </div>
  `;

            msgerChat.insertAdjacentHTML("beforeend", msgHTML);
            msgerChat.scrollTop += 500;
        }

        function botResponse(question) {

            const msgText = getAnswer(question);
            const delay = msgText.split(" ").length * 100;

            setTimeout(() => {
                appendMessage(BOT_NAME, BOT_IMG, "left", msgText);
            }, delay);
        }

        // Utils
        function get(selector, root = document) {
            return root.querySelector(selector);
        }

        function formatDate(date) {
            const h = "0" + date.getHours();
            const m = "0" + date.getMinutes();

            return `${h.slice(-2)}:${m.slice(-2)}`;
        }

        function random(min, max) {
            return Math.floor(Math.random() * (max - min) + min);
        }

    </script>

</body>

</html>